<?xml version="1.0"?>
<project name="media" default="package" basedir="../../">   <!-- We take care of the specific dir to copy below -->
    <property name="app.name" value="media"/>
    <property name="deploy.dir" value="/srv/http/localcity"/>
    <property name="production.dir" value="/media/tmc/"/>
    <property name="utilities.dir" value="${basedir}/utils"/>    

    <target name="clean">
        <delete dir="${deploy.dir}/${app.name}/css"/>
		<delete dir="${deploy.dir}/${app.name}/js"/>
    </target>

    <target name="package" depends="clean">
        <copy todir="${deploy.dir}/${app.name}/css">			<!-- here -->
			<fileset dir="${app.name}/css">
  				<include name="screen-common.css"/>
  				<include name="screen-root.css"/>
  				<include name="screen-blog.css"/>
  				<include name="screen-workshop.css"/>

  				<include name="mobile-common.css"/>
  				<include name="mobile-root.css"/>
  				<include name="mobile-blog.css"/>
  				<include name="mobile-workshop.css"/>
			</fileset>
		</copy>

        <copy todir="${deploy.dir}/${app.name}/js">			<!-- here -->
			<fileset dir="${app.name}/js">
  				<include name="**/*.js"/>
			</fileset>
		</copy>
    </target>

    <target name="production" depends="clean">
        <exec executable="utils/csscombiner.sh" />                  <!-- Smash the files together to optimise requests -->
        <copy todir="${production.dir}/${app.name}/css">			<!-- here -->
			<fileset dir="${app.name}/css">
  				<include name="screen.css"/>
  				<include name="mobile.css"/>
			</fileset>
        </copy>
        <delete file="${app.name}/css/screen.css"/>                 <!-- We dont need them here anymore sice the folder is deployed -->
        <delete file="${app.name}/css/mobile.css"/>

        <copy todir="${production.dir}/${app.name}/js">			<!-- here -->
			<fileset dir="${app.name}/js">
  				<include name="**/*.js"/>
			</fileset>
		</copy>
    </target>
</project>
